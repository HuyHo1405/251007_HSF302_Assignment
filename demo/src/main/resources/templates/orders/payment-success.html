<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/base :: head('Thanh toán thành công')}"></head>
<body th:replace="~{layout/base :: layout(~{::content}, 'Thanh toán thành công', 'Đơn hàng đã được ghi nhận và đang chờ xử lý')}">
<main th:fragment="content">
    <div class="glass-card text-center">
        <div class="avatar-ring mx-auto mb-3" style="color:#22c55e;border-color:rgba(34,197,94,0.45);background:rgba(34,197,94,0.15)">
            <i class="bi bi-check2"></i>
        </div>
        <h2 class="mb-2">Thanh toán thành công!</h2>
        <p class="text-secondary" th:text="${message != null ? message : 'Cảm ơn bạn đã tin tưởng HSF302 Shop.'}"></p>

        <div class="summary-grid mt-4">
            <div class="summary-item" th:if="${payment != null}">
                <h4><i class="bi bi-credit-card me-2"></i>Thông tin thanh toán</h4>
                <p class="mb-1"><strong>Mã đơn hàng:</strong> <span th:text="${orderCode}">PAY001</span></p>
                <p class="mb-1"><strong>Số tiền:</strong> <span th:text="${payment.amount != null ? #numbers.formatDecimal(payment.amount, 0, 'COMMA', 0, 'POINT') + ' ₫' : '---'}"></span></p>
                <p class="mb-1"><strong>Phương thức:</strong> <span th:text="${payment.paymentMethod}">VNPay</span></p>
                <p class="mb-0"><strong>Thời gian:</strong> <span th:text="${payment.paidAt}">--</span></p>
            </div>
            <div class="summary-item" th:if="${order != null}">
                <h4><i class="bi bi-receipt me-2"></i>Thông tin đơn hàng</h4>
                <p class="mb-1"><strong>Mã đơn:</strong> <span th:text="'#' + ${order.id}">#1</span></p>
                <p class="mb-1"><strong>Trạng thái:</strong> <span th:text="${order.status}">PAID</span></p>
                <p class="mb-1"><strong>Tổng tiền:</strong> <span th:text="${order.totalPrice != null ? #numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 0, 'POINT') + ' ₫' : '---'}"></span></p>
                <p class="mb-0"><strong>Địa chỉ giao:</strong> <span th:text="${order.shippingAddress != null ? order.shippingAddress : 'Chưa cập nhật'}"></span></p>
            </div>
        </div>

        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
            <a th:if="${order != null}" th:href="@{/orders/{id}(id=${order.id})}" class="btn-primary">
                <i class="bi bi-eye"></i> Xem chi tiết đơn hàng
            </a>
            <a class="btn-secondary" href="/orders/my">
                <i class="bi bi-bag-check"></i> Đơn hàng của tôi
            </a>
            <a class="btn-secondary" href="/home">
                <i class="bi bi-house-door"></i> Về trang chủ
            </a>
        </div>
    </div>
</main>
</body>
</html>

