<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{layout/base :: head('Thanh toán thất bại')}"></head>
<body th:replace="~{layout/base :: layout(~{::content}, 'Thanh toán thất bại', 'Giao dịch chưa được hoàn tất, hãy thử lại hoặc chọn phương án khác')}">
<main th:fragment="content">
    <div class="glass-card text-center">
        <div class="avatar-ring mx-auto mb-3" style="color:#ef4444;border-color:rgba(239,68,68,0.45);background:rgba(239,68,68,0.15)">
            <i class="bi bi-x-circle"></i>
        </div>
        <h2 class="mb-2">Thanh toán thất bại!</h2>
        <p class="text-secondary">Rất tiếc, giao dịch của bạn chưa thể hoàn tất. Vui lòng kiểm tra chi tiết bên dưới.</p>

        <div class="alert-glass alert-danger mt-4" th:if="${message != null}">
            <i class="bi bi-exclamation-triangle"></i>
            <span th:text="${message}">Có lỗi xảy ra trong quá trình thanh toán.</span>
        </div>

        <div class="summary-item mt-4 text-start">
            <h4><i class="bi bi-lightbulb me-2"></i>Gợi ý khắc phục</h4>
            <ul class="list-inline">
                <li><i class="bi bi-check-circle text-danger"></i> Kiểm tra lại thông tin thẻ hoặc tài khoản ngân hàng.</li>
                <li><i class="bi bi-check-circle text-danger"></i> Đảm bảo tài khoản của bạn đủ số dư.</li>
                <li><i class="bi bi-check-circle text-danger"></i> Kiểm tra kết nối internet và thực hiện lại giao dịch.</li>
                <li><i class="bi bi-check-circle text-danger"></i> Thử chọn phương thức thanh toán khác hoặc liên hệ ngân hàng.</li>
            </ul>
        </div>

        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
            <a th:href="${retryOrderId != null} ? @{'/payments/create/' + ${retryOrderId}} : '/orders'" class="btn-primary">
                <i class="bi bi-arrow-repeat"></i> Thử lại thanh toán
            </a>
            <a href="/orders" class="btn-secondary">
                <i class="bi bi-list-ul"></i> Danh sách đơn hàng
            </a>
        </div>

        <div class="mt-4 text-secondary small">
            <i class="bi bi-headset"></i> Cần hỗ trợ? Liên hệ <strong>1900-xxxx</strong> hoặc <strong>support@hsf302shop.com</strong>
        </div>
    </div>
</main>
</body>
</html>